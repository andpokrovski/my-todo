window.utils={checkElements:function(){var e=Array.prototype.slice.call(arguments),r=[];return e.reduce(function(e,t,n,i){var o=Boolean(t);return o||r.push(n+1),e&&o},!0)}},window.time={getStringDate:function(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return n<10&&(n="0"+n),i<10&&(i="0"+i),t+"-"+n+"-"+i},getStringTime:function(e){var t=e.getHours(),n=e.getMinutes();return t<10&&(t="0"+t),n<10&&(n="0"+n),t+":"+n},getNumberTime:function(e){return{hours:parseInt(e.substr(0,2),10),minutes:parseInt(e.substr(3,2),10)}},getDateFromString:function(e,t){if(t)var n=e+"T"+t;return new Date(Date.parse(n||e))}},function(){var t=document.querySelector(".body"),n=document.querySelector(".fonts");document.addEventListener("DOMContentLoaded",function(){var e=storage.get("fontFamily");e&&(t.style.fontFamily=e,n.value=e)}),n.addEventListener("change",function(){t.style.fontFamily=n.value,storage.set("fontFamily",n.value)}),window.font={reset:function(){t.style.fontFamily="",n.options[0].selected=!0}}}(),function(){var t=document.querySelector(".notice");t.addEventListener("click",function(){t.classList.toggle("notice--active",!1)}),window.notice={show:function(e){t.textContent=e,t.classList.toggle("notice--active",!0),setTimeout(function(){t.classList.toggle("notice--active",!1)},1500)}}}(),window.storage={set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(localStorage.getItem(e))},remove:function(e){localStorage.removeItem(e)},clear:function(){if(arguments)var e=Array.prototype.slice.call(arguments),n=e.map(function(e){return localStorage.getItem(e)});localStorage.clear(),n&&e.forEach(function(e,t){localStorage.setItem(e,n[t])})}},function(){var t="Europe/Moscow";window.CalendarEvent=function(e){this.summary=e.get("summary"),this.start={},this.end={},form.allDay?(this.start.date=e.get("start-date"),this.end.date=e.get("end-date")):(this.start.dateTime=time.getDateFromString(e.get("start-date"),e.get("start-time")).toISOString(),this.end.dateTime=time.getDateFromString(e.get("end-date"),e.get("end-time")).toISOString()),this.start.timeZone=t,this.end.timeZone=t,this.location=e.get("location")||"",this.description=e.get("description")||"",this.extendedProperties={private:{startDate:e.get("start-date"),startTime:e.get("start-time"),endDate:e.get("end-date"),endTime:e.get("end-time")}}}}();var gapi=window.gapi=window.gapi||{};gapi._bs=(new Date).getTime(),function(){var k,t=this||self,e=function(e){return e},D=window,T=document,n=D.location,q=function(){},i=/\[native code\]/,C=function(e,t,n){return e[t]=e[t]||n},I=function(){var e;if((e=Object.create)&&i.test(e))e=e(null);else for(var t in e={})e[t]=void 0;return e},O=C(D,"gapi",{});k=C(D,"___jsl",I()),C(k,"I",0),C(k,"hel",10);var A=function(){var e=n.href;if(k.dpo)var t=k.h;else{t=k.h;if(e=e&&(/([#].*&|[#])jsh=([^&#]*)/g.exec(e)||/([?#].*&|[?#])jsh=([^&#]*)/g.exec(e)))try{t=decodeURIComponent(e[2])}catch(e){}}return t},M=function(e){return C(C(k,"H",I()),e,I())},o=C(k,"perf",I()),r=C(o,"g",I()),a=C(o,"i",I());C(o,"r",[]),I(),I();var s=function(e,t,n){var i=o.r;"function"==typeof i?i(e,t,n):i.push([e,t,n])},j=function(e,t,n){t&&0<t.length&&(t=c(t),n&&0<n.length&&(t+="___"+c(n)),28<t.length&&(t=t.substr(0,28)+(t.length-28)),n=t,t=C(a,"_p",I()),C(t,n,I())[e]=(new Date).getTime(),s(e,"_p",n))},c=function(e){return e.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},P=I(),d=[],F=function(e){throw Error("Bad hint"+(e?": "+e:""))};d.push(["jsl",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];"object"==typeof n?k[t]=C(k,t,[]).concat(n):C(k,t,n)}(t=e.u)&&((e=C(k,"us",[])).push(t),(t=/^https:(.*)$/.exec(t))&&e.push("http:"+t[1]))}]);var l=/^(\/[a-zA-Z0-9_\-]+)+$/,u=[/\/amp\//,/\/amp$/,/^\/amp$/],m=/^[a-zA-Z0-9\-_\.,!]+$/,p=/^gapi\.loaded_[0-9]+$/,g=/^[a-zA-Z0-9,._-]+$/,f=function(e){"/"!==e.charAt(0)&&F("relative path");for(var t=e.substring(1).split("/"),n=[];t.length;){if((e=t.shift()).length&&0!=e.indexOf(".")){if(0<e.indexOf("=")){t.unshift(e);break}}else F("empty/relative directory");n.push(e)}e={};for(var i=0,o=t.length;i<o;++i){var r=t[i].split("="),a=decodeURIComponent(r[0]),s=decodeURIComponent(r[1]);2==r.length&&a&&s&&(e[a]=e[a]||s)}for(t="/"+n.join("/"),l.test(t)||F("invalid_prefix"),n=0,i=u.length;n<i;++n)u[n].test(t)&&F("invalid_prefix");return{pathPrefix:t,version:n=v(e,"k",!0),a:i=v(e,"am"),c:o=v(e,"rs"),f:e=v(e,"t")}},h=function(e){for(var t=[],n=0,i=e.length;n<i;++n){var o=e[n].replace(/\./g,"_").replace(/-/g,"_");g.test(o)&&t.push(o)}return t.join(",")},v=function(e,t,n){if(!(e=e[t])&&n&&F("missing: "+t),e){if(m.test(e))return e;F("invalid: "+t)}return null},R=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,U=/\/cb=/g,N=/\/\//g;P.m=function(e,t,n,i){return(e=e[0])||F("missing_hint"),"https://apis.google.com"+function(e,t,n,i){e=f(e),p.test(n)||F("invalid_callback"),t=h(t),i=i&&i.length?h(i):null;var o=function(e){return encodeURIComponent(e).replace(/%2C/g,",")};return[encodeURIComponent(e.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",o(e.version),"/m=",o(t),i?"/exm="+o(i):"","/rt=j/sv=1/d=1/ed=1",e.a?"/am="+o(e.a):"",e.c?"/rs="+o(e.c):"",e.f?"/t="+o(e.f):"","/cb=",o(n)].join("")}(e,t,n,i)};var z=decodeURI("%73cript"),_=/^[-+_0-9\/A-Za-z]+={0,2}$/,B=function(e,t){for(var n=[],i=0;i<e.length;++i){var o,r=e[i];if(o=r){e:{for(o=0;o<t.length;o++)if(t[o]===r)break e;o=-1}o=o<0}o&&n.push(r)}return n},H=function(){var e=k.nonce;return void 0!==e?e&&e===String(e)&&e.match(_)?e:k.nonce=null:T.querySelector&&(e=T.querySelector("script[nonce]"))?(e=e.nonce||e.getAttribute("nonce")||"")&&e===String(e)&&e.match(_)?k.nonce=e:k.nonce=null:null},$=function(e){var t=T.createElement(z);t.setAttribute("src",Z?Z.createScriptURL(e):e),null!==(e=H())&&t.setAttribute("nonce",e),t.async="true",(e=T.getElementsByTagName(z)[0])?e.parentNode.insertBefore(t,e):(T.head||T.body||T.documentElement).appendChild(t)},w=function(e,t){var n=t||{};"function"==typeof t&&((n={}).callback=t),function(e,t){var n=t&&t._c;if(n)for(var i=0;i<d.length;i++){var o=d[i][0],r=d[i][1];r&&Object.prototype.hasOwnProperty.call(n,o)&&r(n[o],e,t)}}(e,n),t=e?e.split(":"):[];var i=n.h||function(){var e=A();if(!e)throw Error("Bad hint");return e}(),o=C(k,"ah",I());if(o["::"]&&t.length){e=[];for(var r=null;r=t.shift();){var a=r.split(".");a=o[r]||o[a[1]&&"ns:"+a[0]||""]||i;var s=e.length&&e[e.length-1]||null,c=s;s&&s.hint==a||(c={hint:a,b:[]},e.push(c)),c.b.push(r)}var l=e.length;if(1<l){var u=n.callback;u&&(n.callback=function(){0==--l&&u()})}for(;t=e.shift();)y(t.b,n,t.hint)}else y(t||[],n,i)},y=function(e,t,r){e=function(e){e=e.sort();for(var t=[],n=void 0,i=0;i<e.length;i++){var o=e[i];o!=n&&t.push(o),n=o}return t}(e)||[];var i=t.callback,a=t.config,n=t.timeout,o=t.ontimeout,s=t.onerror,c=void 0;"function"==typeof s&&(c=s);var l=null,u=!1;if(n&&!o||!n&&o)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";s=C(M(r),"r",[]).sort();var d=C(M(r),"L",[]).sort(),m=[].concat(s),p=function(e,t){if(u)return 0;D.clearTimeout(l),d.push.apply(d,S);var n,i,o=((O||{}).config||{}).update;if(o?o(a):a&&C(k,"cu",[]).push(a),t){j("me0",e,m);try{n=t,i=r,J(function(){var e=i===A()?C(O,"_",I()):I();e=C(M(i),"_",e),n(e)},c)}finally{j("me1",e,m)}}return 1};0<n&&(l=D.setTimeout(function(){u=!0,o()},n));var g,f,h,v,_,w,y,b,S=B(e,d);if(S.length){S=B(e,s);var x=C(k,"CP",[]),E=x.length;if(x[E]=function(t){if(!t)return 0;j("ml1",S,m);var e=function(e){x[E]=null,p(S,t)&&function(e){var t=C(k,"PQ",[]);k.PQ=[];var n=t.length;if(0===n)e();else for(var i=0,o=function(){++i===n&&e()},r=0;r<n;r++)t[r](o)}(function(){i&&i(),e()})},n=function(){var e=x[E+1];e&&e()};0<E&&x[E-1]?x[E]=function(){e(n)}:e(n)},S.length){var L="loaded_"+k.I++;O[L]=function(e){x[E](e),O[L]=null},f=S,h="gapi."+L,v=s,_=(g=r).split(";"),w=_.shift(),y=P[w],b=null,y?b=y(_,f,h,v):F("no hint processor for: "+w),b||F("failed to generate load url"),h=(f=b).match(N),(v=f.match(U))&&1===v.length&&R.test(f)&&h&&1===h.length||F("failed sanity: "+g),e=b,s.push.apply(s,S),j("ml0",S,m),t.sync||D.___gapisync?function(e){if("loading"!=T.readyState)$(e);else{var t=H(),n="";null!==t&&(n=' nonce="'+t+'"'),e="<"+z+' src="'+encodeURI(e)+'"'+n+"></"+z+">",T.write(Z?Z.createHTML(e):e)}}(e):$(e)}else x[E](q)}else p(S)&&i&&i()},b=null,S=t.trustedTypes;if(S&&S.createPolicy)try{b=S.createPolicy("gapi#gapi",{createHTML:e,createScript:e,createScriptURL:e})}catch(e){t.console&&t.console.error(e.message)}var Z=b,J=function(e,n){if(k.hee&&0<k.hel)try{return e()}catch(t){n&&n(t),k.hel--,w("debug_error",function(){try{window.___jsl.hefn(t)}catch(e){throw t}})}else try{return e()}catch(e){throw n&&n(e),e}};O.load=function(e,t){return J(function(){return w(e,t)})},r.bs0=window.gapi._bs||(new Date).getTime(),s("bs0"),r.bs1=(new Date).getTime(),s("bs1"),delete window.gapi._bs}.call(this),gapi.load("",{callback:window.gapi_onload,_c:{jsl:{ci:{deviceType:"mobile","oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:.05,forceIm:!1,rethrowException:!1,host:"https://apis.google.com"},enableMultilogin:!0,"googleapis.config":{auth:{useFirstPartyAuthV2:!0}},isPlusUser:!1,inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},isLoggedIn:!0,signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"ru",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},":gplus_url:":"https://plus.google.com",signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},additnow:{url:"https://apis.google.com/marketplace/button?usegapi=1",methods:["launchurl"]},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},sharetoclassroom:{url:"https://www.gstatic.com/classroom/sharewidget/widget_stable.html?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://gsuite.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},h:"m;/_/scs/apps-static/_/js/k=oz.gapi.ru.bUeeCwQBnSs.O/am=wQE/d=1/ct=zgms/rs=AGLTcCN3OgtCqv3yH2CsRpixf2GBGKb06Q/m=__features__",u:"https://apis.google.com/js/api.js",hee:!0,fp:"8a45d50662317d0fcf3bf2df0618d210a4955da8",dpo:!1},fp:"8a45d50662317d0fcf3bf2df0618d210a4955da8",annotation:["interactivepost","recobar","signin2","autocomplete","profile"],bimodal:["signin","share"]}}),function(){var n,i=function(){var e=this;e.element.classList.toggle("modal--active",!1),setTimeout(function(){e.element.classList.toggle("d-none",!0)},250);var t=new CustomEvent("modalClosed",{cancelable:!0,bubbles:!0});e.element.dispatchEvent(t),document.removeEventListener("keydown",n)},e=function(e){var t=this;this.element=document.querySelector(e);var n=this.element.querySelectorAll(".modal__close");0<n.length&&n.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),i.call(t)})})};e.prototype={open:function(){var e=this;e.element.classList.toggle("d-none",!1),setTimeout(function(){e.element.classList.toggle("modal--active",!0)},10);var t=new CustomEvent("modalOpened",{cancelable:!0,bubbles:!0});e.element.dispatchEvent(t),n=function(e){"Escape"===e.key&&i.call(this)}.bind(e),document.addEventListener("keydown",n)},close:i},window.Modal=e}(),function(){var e=new Modal(".editor");window.editor=e}(),function(){var m=document.querySelector("#template").content.querySelector(".item"),n=document.querySelector(".list"),i=function(t){var n=m.cloneNode("true"),e=n.querySelector(".item__summary"),i=n.querySelector(".item__time"),o=n.querySelector(".item__start-time"),r=n.querySelector(".item__end-time"),a=n.querySelector(".item__done"),s=n.querySelector(".item__done-input"),c=n.querySelector(".item__update"),l=n.querySelector(".item__delete"),u=n.querySelector(".item__location"),d=n.querySelector(".item__description");return e.textContent=t.summary,t.start.dateTime&&t.end.dateTime&&(i.classList.add("item__time--show"),o.textContent=t.extendedProperties.private.startTime,r.textContent=t.extendedProperties.private.endTime),t.location&&(u.classList.add("item__location--show"),u.textContent=t.location),t.description&&(d.classList.add("item__description--show"),d.textContent=t.description),s.addEventListener("change",function(e){s.checked?(a.classList.add("item__done--checked"),t.extendedProperties.private.done=!0):(a.classList.remove("item__done--checked"),t.extendedProperties.private.done=!1),storage.set(t.id,t)}),c.addEventListener("click",function(e){e.preventDefault(),form.fill(t.id),form.current.element=n,form.current.id=t.id,editor.open()}),l.addEventListener("click",function(e){e.preventDefault(),p(n),storage.remove(t.id),removeEvent(t.id)}),n},p=function(e){n.removeChild(e)};window.items={add:function(e){var t=i(e);n.prepend(t)},render:function(e){var t=document.createDocumentFragment();e.forEach(function(e){t.appendChild(i(e)),storage.set(e.id,e)}),n.appendChild(t)},remove:p,clear:function(){for(;n.firstChild;)n.removeChild(n.firstChild)},update:function(e,t){var n=e.querySelector(".item__summary"),i=e.querySelector(".item__time"),o=e.querySelector(".item__start-time"),r=e.querySelector(".item__end-time"),a=e.querySelector(".item__location"),s=e.querySelector(".item__description");n.textContent=t.summary,t.start.dateTime&&t.end.dateTime?(i.classList.add("item__time--show"),o.textContent=t.extendedProperties.private.startTime,r.textContent=t.extendedProperties.private.endTime):(i.classList.remove("item__time--show"),o.textContent="",r.textContent=""),t.location?(console.log(t.location),a.classList.add("item__location--show"),a.textContent=t.location):(a.classList.remove("item__location--show"),a.textContent=""),t.description?(console.log(t.description),s.classList.add("item__description--show"),s.textContent=t.description):(s.classList.remove("item__description--show"),s.textContent="")}}}(),function(){document.querySelector(".add-button").addEventListener("click",function(e){e.preventDefault(),editor.open(),form.setDefaultDateTime()});window.createEvent=function(e){console.log("created");var t=new CalendarEvent(e);gapi.client.calendar.events.insert({calendarId:"primary",resource:t}).execute(function(e){e.id?(items.add(e),storage.set(e.id,e),editor.close(),form.reset(),notice.show("Успешно сохранено")):notice.show("Произошла ошибка. Проверьте, правильно ли вы ввели данные.")})}}();var updateEvent=function(e,t,n){console.log("updated");var i=new CalendarEvent(n);return items.update(e,i),storage.set(t,i),gapi.client.calendar.events.update({calendarId:"primary",eventId:t,resource:i}).then(function(e){editor.close(),form.reset(),notice.show("Успешно обновлено")},function(e){notice.show("Произошла ошибка. Проверьте, правильно ли вы ввели данные.")})};window.updateEvent=updateEvent,function(){var t=new Modal(".auth"),e="275521875892-icq30gfodvskd45gmn0gkaebeuqko36d.apps.googleusercontent.com",n="AIzaSyAMYDRrik_DUzxORRSm5BJFUuzjiJkZlO8",i=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],o="https://www.googleapis.com/auth/calendar",r=document.getElementById("auth-button"),a=document.getElementById("signout-button");function s(){gapi.client.init({apiKey:n,clientId:e,discoveryDocs:i,scope:o}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(c),c(gapi.auth2.getAuthInstance().isSignedIn.get()),r.onclick=l,a.onclick=u},function(e){console.log(JSON.stringify(e,null,2))})}function c(e){e&&(list.setDefaultDate(),list.update(new Date),t.close())}function l(e){gapi.auth2.getAuthInstance().signIn()}function u(e){gapi.auth2.getAuthInstance().signOut(),list.resetDefaultDate(),items.clear(),storage.clear(),t.open(),font.reset()}document.addEventListener("DOMContentLoaded",function(){gapi.load("client:auth2",s)})}(),function(){var n=document.querySelector(".form"),e=document.querySelector(".modal__close"),t=n.elements.type,i=n.querySelector(".form__type-input--event"),o=n.querySelector(".form__type-input--task"),r="event",a=n.querySelector(".form__all-day-input"),s=n.querySelectorAll(".form__date"),c=n.querySelector(".form__date--start"),l=n.querySelector(".form__date--end"),u=n.querySelectorAll(".form__time"),d=n.querySelector(".form__time--start"),m=n.querySelector(".form__time--end");editor.element.addEventListener("modalOpened",function(){n.elements.summary.focus()}),t.forEach(function(e){e.addEventListener("change",function(){this.checked&&(n.classList.remove("form--"+r),r=this.value,n.classList.add("form--"+r)),"event"===r&&(c.required=!0),"task"===r&&(c.required=!1)})}),c.addEventListener("change",function(){l.value=this.value}),a.addEventListener("change",function(){n.classList.toggle("form--all-day"),form.allDay=a.checked,u.forEach(function(e){a.checked?e.required=!1:(e.required=!0,p())})});var p=function(){var e=new Date;e.getMinutes()<30?e.setMinutes(30):(e.setHours(e.getHours()+1),e.setMinutes(0)),d.value=time.getStringTime(e),e.setMinutes(e.getMinutes()+30),m.value=time.getStringTime(e)};d.addEventListener("change",function(){(function(){var e=new Date,t=time.getNumberTime(this.value).hours,n=time.getNumberTime(this.value).minutes;e.setHours(t),e.setMinutes(n+30),m.value=time.getStringTime(e)}).call(this)});m.addEventListener("change",function(){!function(){var e=time.getNumberTime(d.value).hours,t=time.getNumberTime(d.value).minutes,n=time.getNumberTime(m.value).hours,i=time.getNumberTime(m.value).minutes;if(n<e||e===n&&i<t){var o=getDateFromString(l.value);o.setDate(o.getDate()+1),l.value=time.getStringDate(o)}}()});n.addEventListener("submit",function(e){e.preventDefault();var t=new FormData(n);form.current.element&&form.current.id?(updateEvent(form.current.element,form.current.id,t),form.current.element=null,form.current.id=null):createEvent(t)});var g=function(){n.reset(),n.className="form form--event"};e.addEventListener("click",function(){g()}),window.form={element:n,setDefaultDateTime:function(){var t;t=time.getStringDate(new Date),s.forEach(function(e){e.value=t}),p()},allDay:!1,fill:function(e){var t=storage.get(e);n.elements.summary.value=t.summary,t.start.dateTime&&t.end.dateTime?(n.elements["start-date"].value=t.start.dateTime.substr(0,10),n.elements["end-date"].value=t.end.dateTime.substr(0,10),n.elements["start-time"].value=t.start.dateTime.substr(11,5),n.elements["end-time"].value=t.end.dateTime.substr(11,5)):(n.classList.toggle("form--all-day",!0),a.checked=!0,form.allDay=!0,n.elements["start-date"].value=t.start.date,n.elements["end-date"].value=t.end.date),t.start.dateTime&&t.end.dateTime&&t.start.dateTime===t.end.dateTime?(i.checked=!1,o.checked=!0,n.classList.toggle("form--event",!1),n.classList.toggle("form--task",!0)):(i.checked=!0,o.checked=!1,n.classList.toggle("form--event",!0),n.classList.toggle("form--task",!1)),t.location&&(n.elements.location.value=t.location),t.description&&(n.elements.description.value=t.description)},reset:g,current:{element:null,id:null}}}(),function(){var t=document.querySelector(".header__current-date"),n=function(e){return e.setHours(0,0,0),e},i=function(e){return e.setHours(23,59,59),e},o=function(e){this.calendarId="primary",this.timeMin=n(e).toISOString(),this.timeMax=i(e).toISOString(),this.singleEvents=!0,this.orderBy="startTime"},r=function(e){gapi.client.calendar.events.list(new o(e)).then(function(e){var t=e.result.items;items.clear(),storage.clear("fontFamily"),0<t.length?items.render(t):notice.show("События не найдены")})};t.addEventListener("change",function(){var e=new Date(this.value);r(e)}),window.list={setDefaultDate:function(){var e=time.getStringDate(new Date);t.value=e},resetDefaultDate:function(){t.value=null},update:r}}(),function(){var t=function(e){this.calendarId="primary",this.eventId=e};window.removeEvent=function(e){return gapi.client.calendar.events.delete(new t(e)).then(function(){notice.show("Успешно удалено")},function(){notice.show("Не удалось удалить")})}}();
//# sourceMappingURL=script.min.js.map
