window.utils={checkElements:function(){var e=Array.prototype.slice.call(arguments),a=[];return e.reduce(function(e,t,n,o){var r=Boolean(t);return r||a.push(n+1),e&&r},!0)},formatDate:function(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return o<10&&(o="0"+o),n<10&&(n="0"+o),t+"-"+n+"-"+o}},function(){var t=document.querySelector(".body"),n=document.querySelector(".fonts");document.addEventListener("DOMContentLoaded",function(){var e=storage.get("fontFamily");e&&(t.style.fontFamily=e,n.value=e)}),n.addEventListener("change",function(){t.style.fontFamily=n.value,storage.set("fontFamily",n.value)}),window.font={reset:function(){t.style.fontFamily="",n.options[0].selected=!0}}}();var notice=document.querySelector(".notice"),showNotice=function(e){notice.textContent=e,notice.classList.toggle("notice--active",!0),setTimeout(function(){notice.classList.toggle("notice--active",!1)},1500)};notice.addEventListener("click",function(){notice.classList.toggle("notice--active",!1)}),window.notice.show=showNotice;var CLEAR_EXCEPTIONS=["fontFamily"],setToStorage=function(e,t){localStorage.setItem(e,JSON.stringify(t))},getFromStorage=function(e){return JSON.parse(localStorage.getItem(e))},removeFromStorage=function(e){localStorage.removeItem(e)},clearStorage=function(){if(arguments)var e=Array.prototype.slice.call(arguments),n=e.map(function(e){return localStorage.getItem(e)});localStorage.clear(),n&&e.forEach(function(e,t){localStorage.setItem(e,n[t])})};window.storage={set:setToStorage,get:getFromStorage,remove:removeFromStorage,clear:clearStorage};var UTC="+03:00",TIMEZONE="Europe/Moscow",formatDateTime=function(e,t){var n=e+"T"+t;return new Date(Date.parse(n)).toISOString()},CalendarEvent=function(e){this.summary=e.get("summary"),this.start={},this.end={},form.allDay?(this.start.date=e.get("start-date"),this.end.date=e.get("end-date")):(this.start.dateTime=formatDateTime(e.get("start-date"),e.get("start-time")),this.end.dateTime=formatDateTime(e.get("end-date"),e.get("end-time"))),this.start.timeZone=TIMEZONE,this.end.timeZone=TIMEZONE,this.location=e.get("location")||"",this.description=e.get("description")||""};window.CalendarEvent;var gapi=window.gapi=window.gapi||{};gapi._bs=(new Date).getTime(),function(){var k,t=this||self,e=function(e){return e},T=window,C=document,n=T.location,L=function(){},o=/\[native code\]/,x=function(e,t,n){return e[t]=e[t]||n},q=function(){var e;if((e=Object.create)&&o.test(e))e=e(null);else for(var t in e={})e[t]=void 0;return e},O=x(T,"gapi",{});k=x(T,"___jsl",q()),x(k,"I",0),x(k,"hel",10);var A=function(){var e=n.href;if(k.dpo)var t=k.h;else{t=k.h;if(e=e&&(/([#].*&|[#])jsh=([^&#]*)/g.exec(e)||/([?#].*&|[?#])jsh=([^&#]*)/g.exec(e)))try{t=decodeURIComponent(e[2])}catch(e){}}return t},F=function(e){return x(x(k,"H",q()),e,q())},r=x(k,"perf",q()),a=x(r,"g",q()),i=x(r,"i",q());x(r,"r",[]),q(),q();var s=function(e,t,n){var o=r.r;"function"==typeof o?o(e,t,n):o.push([e,t,n])},R=function(e,t,n){t&&0<t.length&&(t=l(t),n&&0<n.length&&(t+="___"+l(n)),28<t.length&&(t=t.substr(0,28)+(t.length-28)),n=t,t=x(i,"_p",q()),x(t,n,q())[e]=(new Date).getTime(),s(e,"_p",n))},l=function(e){return e.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},B=q(),d=[],P=function(e){throw Error("Bad hint"+(e?": "+e:""))};d.push(["jsl",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];"object"==typeof n?k[t]=x(k,t,[]).concat(n):x(k,t,n)}(t=e.u)&&((e=x(k,"us",[])).push(t),(t=/^https:(.*)$/.exec(t))&&e.push("http:"+t[1]))}]);var c=/^(\/[a-zA-Z0-9_\-]+)+$/,u=[/\/amp\//,/\/amp$/,/^\/amp$/],m=/^[a-zA-Z0-9\-_\.,!]+$/,p=/^gapi\.loaded_[0-9]+$/,g=/^[a-zA-Z0-9,._-]+$/,f=function(e){"/"!==e.charAt(0)&&P("relative path");for(var t=e.substring(1).split("/"),n=[];t.length;){if((e=t.shift()).length&&0!=e.indexOf(".")){if(0<e.indexOf("=")){t.unshift(e);break}}else P("empty/relative directory");n.push(e)}e={};for(var o=0,r=t.length;o<r;++o){var a=t[o].split("="),i=decodeURIComponent(a[0]),s=decodeURIComponent(a[1]);2==a.length&&i&&s&&(e[i]=e[i]||s)}for(t="/"+n.join("/"),c.test(t)||P("invalid_prefix"),n=0,o=u.length;n<o;++n)u[n].test(t)&&P("invalid_prefix");return{pathPrefix:t,version:n=v(e,"k",!0),a:o=v(e,"am"),c:r=v(e,"rs"),f:e=v(e,"t")}},h=function(e){for(var t=[],n=0,o=e.length;n<o;++n){var r=e[n].replace(/\./g,"_").replace(/-/g,"_");g.test(r)&&t.push(r)}return t.join(",")},v=function(e,t,n){if(!(e=e[t])&&n&&P("missing: "+t),e){if(m.test(e))return e;P("invalid: "+t)}return null},j=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,N=/\/cb=/g,U=/\/\//g;B.m=function(e,t,n,o){return(e=e[0])||P("missing_hint"),"https://apis.google.com"+function(e,t,n,o){e=f(e),p.test(n)||P("invalid_callback"),t=h(t),o=o&&o.length?h(o):null;var r=function(e){return encodeURIComponent(e).replace(/%2C/g,",")};return[encodeURIComponent(e.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",r(e.version),"/m=",r(t),o?"/exm="+r(o):"","/rt=j/sv=1/d=1/ed=1",e.a?"/am="+r(e.a):"",e.c?"/rs="+r(e.c):"",e.f?"/t="+r(e.f):"","/cb=",r(n)].join("")}(e,t,n,o)};var M=decodeURI("%73cript"),w=/^[-+_0-9\/A-Za-z]+={0,2}$/,z=function(e,t){for(var n=[],o=0;o<e.length;++o){var r,a=e[o];if(r=a){e:{for(r=0;r<t.length;r++)if(t[r]===a)break e;r=-1}r=r<0}r&&n.push(a)}return n},Z=function(){var e=k.nonce;return void 0!==e?e&&e===String(e)&&e.match(w)?e:k.nonce=null:C.querySelector&&(e=C.querySelector("script[nonce]"))?(e=e.nonce||e.getAttribute("nonce")||"")&&e===String(e)&&e.match(w)?k.nonce=e:k.nonce=null:null},$=function(e){var t=C.createElement(M);t.setAttribute("src",H?H.createScriptURL(e):e),null!==(e=Z())&&t.setAttribute("nonce",e),t.async="true",(e=C.getElementsByTagName(M)[0])?e.parentNode.insertBefore(t,e):(C.head||C.body||C.documentElement).appendChild(t)},_=function(e,t){var n=t||{};"function"==typeof t&&((n={}).callback=t),function(e,t){var n=t&&t._c;if(n)for(var o=0;o<d.length;o++){var r=d[o][0],a=d[o][1];a&&Object.prototype.hasOwnProperty.call(n,r)&&a(n[r],e,t)}}(e,n),t=e?e.split(":"):[];var o=n.h||function(){var e=A();if(!e)throw Error("Bad hint");return e}(),r=x(k,"ah",q());if(r["::"]&&t.length){e=[];for(var a=null;a=t.shift();){var i=a.split(".");i=r[a]||r[i[1]&&"ns:"+i[0]||""]||o;var s=e.length&&e[e.length-1]||null,l=s;s&&s.hint==i||(l={hint:i,b:[]},e.push(l)),l.b.push(a)}var c=e.length;if(1<c){var u=n.callback;u&&(n.callback=function(){0==--c&&u()})}for(;t=e.shift();)y(t.b,n,t.hint)}else y(t||[],n,o)},y=function(e,t,a){e=function(e){e=e.sort();for(var t=[],n=void 0,o=0;o<e.length;o++){var r=e[o];r!=n&&t.push(r),n=r}return t}(e)||[];var o=t.callback,i=t.config,n=t.timeout,r=t.ontimeout,s=t.onerror,l=void 0;"function"==typeof s&&(l=s);var c=null,u=!1;if(n&&!r||!n&&r)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";s=x(F(a),"r",[]).sort();var d=x(F(a),"L",[]).sort(),m=[].concat(s),p=function(e,t){if(u)return 0;T.clearTimeout(c),d.push.apply(d,b);var n,o,r=((O||{}).config||{}).update;if(r?r(i):i&&x(k,"cu",[]).push(i),t){R("me0",e,m);try{n=t,o=a,Y(function(){var e=o===A()?x(O,"_",q()):q();e=x(F(o),"_",e),n(e)},l)}finally{R("me1",e,m)}}return 1};0<n&&(c=T.setTimeout(function(){u=!0,r()},n));var g,f,h,v,w,_,y,E,b=z(e,d);if(b.length){b=z(e,s);var S=x(k,"CP",[]),I=S.length;if(S[I]=function(t){if(!t)return 0;R("ml1",b,m);var e=function(e){S[I]=null,p(b,t)&&function(e){var t=x(k,"PQ",[]);k.PQ=[];var n=t.length;if(0===n)e();else for(var o=0,r=function(){++o===n&&e()},a=0;a<n;a++)t[a](r)}(function(){o&&o(),e()})},n=function(){var e=S[I+1];e&&e()};0<I&&S[I-1]?S[I]=function(){e(n)}:e(n)},b.length){var D="loaded_"+k.I++;O[D]=function(e){S[I](e),O[D]=null},f=b,h="gapi."+D,v=s,w=(g=a).split(";"),_=w.shift(),y=B[_],E=null,y?E=y(w,f,h,v):P("no hint processor for: "+_),E||P("failed to generate load url"),h=(f=E).match(U),(v=f.match(N))&&1===v.length&&j.test(f)&&h&&1===h.length||P("failed sanity: "+g),e=E,s.push.apply(s,b),R("ml0",b,m),t.sync||T.___gapisync?function(e){if("loading"!=C.readyState)$(e);else{var t=Z(),n="";null!==t&&(n=' nonce="'+t+'"'),e="<"+M+' src="'+encodeURI(e)+'"'+n+"></"+M+">",C.write(H?H.createHTML(e):e)}}(e):$(e)}else S[I](L)}else p(b)&&o&&o()},E=null,b=t.trustedTypes;if(b&&b.createPolicy)try{E=b.createPolicy("gapi#gapi",{createHTML:e,createScript:e,createScriptURL:e})}catch(e){t.console&&t.console.error(e.message)}var H=E,Y=function(e,n){if(k.hee&&0<k.hel)try{return e()}catch(t){n&&n(t),k.hel--,_("debug_error",function(){try{window.___jsl.hefn(t)}catch(e){throw t}})}else try{return e()}catch(e){throw n&&n(e),e}};O.load=function(e,t){return Y(function(){return _(e,t)})},a.bs0=window.gapi._bs||(new Date).getTime(),s("bs0"),a.bs1=(new Date).getTime(),s("bs1"),delete window.gapi._bs}.call(this),gapi.load("",{callback:window.gapi_onload,_c:{jsl:{ci:{deviceType:"mobile","oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:.05,forceIm:!1,rethrowException:!1,host:"https://apis.google.com"},enableMultilogin:!0,"googleapis.config":{auth:{useFirstPartyAuthV2:!0}},isPlusUser:!1,inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},isLoggedIn:!0,signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"ru",iframes:{youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},savetoandroidpay:{url:"https://pay.google.com/gp/v/widget/save"},blogger:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",shortlists:{url:""},hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},":gplus_url:":"https://plus.google.com",signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},additnow:{url:"https://apis.google.com/marketplace/button?usegapi=1",methods:["launchurl"]},":signuphost:":"https://plus.google.com",ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},sharetoclassroom:{url:"https://www.gstatic.com/classroom/sharewidget/widget_stable.html?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://gsuite.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},savetowallet:{url:"https://pay.google.com/gp/v/widget/save"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"}}},h:"m;/_/scs/apps-static/_/js/k=oz.gapi.ru.bUeeCwQBnSs.O/am=wQE/d=1/ct=zgms/rs=AGLTcCN3OgtCqv3yH2CsRpixf2GBGKb06Q/m=__features__",u:"https://apis.google.com/js/api.js",hee:!0,fp:"8a45d50662317d0fcf3bf2df0618d210a4955da8",dpo:!1},fp:"8a45d50662317d0fcf3bf2df0618d210a4955da8",annotation:["interactivepost","recobar","signin2","autocomplete","profile"],bimodal:["signin","share"]}}),window.myTodo={},function(){var t=function(e){"Escape"===e.key&&o()},o=function(){this.element.classList.toggle("d-none",!0);var e=new CustomEvent("modalClosed",{cancelable:!0,bubbles:!0});this.element.dispatchEvent(e),document.removeEventListener("keydown",t)},e=function(e){var t=this;this.element=document.querySelector(e);var n=this.element.querySelectorAll(".modal__close");0<n.length&&n.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),o.bind(t)()})})};e.prototype={open:function(){this.element.classList.toggle("d-none",!1);var e=new CustomEvent("modalOpened",{cancelable:!0,bubbles:!0});this.element.dispatchEvent(e),document.addEventListener("keydown",t)},close:o},window.Modal=e}();var editor=new Modal(".editor");window.editor;var template=document.querySelector("#template"),itemTemplate=template.content.querySelector(".my-todo__item"),itemsList=document.querySelector(".my-todo__list"),createItem=function(t){var n=itemTemplate.cloneNode("true"),e=n.querySelector(".my-todo__summary"),o=n.querySelector(".my-todo__update"),r=n.querySelector(".my-todo__delete"),a=n.querySelector(".item__id");return e.textContent=t.summary,a.value=t.id,r.addEventListener("click",function(e){e.preventDefault(),removeItem(n),storage.remove(t.id),remove.send(t.id)}),o.addEventListener("click",function(e){e.preventDefault(),setDefaultDate(),form.fill(t.id),form.currentId=t.id,editor.open()}),n},addItem=function(e){var t=createItem(e);itemsList.prepend(t)},renderItems=function(e){var t=document.createDocumentFragment();e.forEach(function(e){t.appendChild(createItem(e)),storage.set(e.id,e)}),itemsList.appendChild(t)},removeItem=function(e){itemsList.removeChild(e)},clearItems=function(){for(;itemsList.firstChild;)itemsList.removeChild(itemsList.firstChild)};window.items={add:addItem,render:renderItems,clear:clearItems};var addButton=document.querySelector(".add-button");addButton.addEventListener("click",function(){setDefaultDate(),editor.open()});var createEvent=function(e){console.log("created");var t=new CalendarEvent(e);gapi.client.calendar.events.insert({calendarId:"primary",resource:t}).execute(function(e){e.id?(items.add(e),storage.set(e.id,e),editor.close(),form.reset(),notice.show("Успешно сохранено")):notice.show("Произошла ошибка. Проверьте, правильно ли вы ввели данные.")})};window.create={send:createEvent};var updateEvent=function(e,t){console.log("updated");var n=new CalendarEvent(t);return storage.set(n.id,n),gapi.client.calendar.events.update({calendarId:"primary",eventId:e,resource:n}).then(function(e){editor.close(),form.reset(),notice.show("Успешно обновлено")},function(e){notice.show("Произошла ошибка. Проверьте, правильно ли вы ввели данные.")})};window.update={send:updateEvent};var authPopup=new Modal(".auth"),CLIENT_ID="275521875892-icq30gfodvskd45gmn0gkaebeuqko36d.apps.googleusercontent.com",API_KEY="AIzaSyAMYDRrik_DUzxORRSm5BJFUuzjiJkZlO8",DISCOVERY_DOCS=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],SCOPES="https://www.googleapis.com/auth/calendar",authorizeButton=document.getElementById("auth-button"),signoutButton=document.getElementById("signout-button");function onClientLoad(){gapi.load("client:auth2",initClient)}function initClient(){gapi.client.init({apiKey:API_KEY,clientId:CLIENT_ID,discoveryDocs:DISCOVERY_DOCS,scope:SCOPES}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus),updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get()),authorizeButton.onclick=onAuthClick,signoutButton.onclick=onSignoutClick},function(e){console.log(JSON.stringify(e,null,2))})}function updateSigninStatus(e){e&&(list.setDefaultDate(),list.update(new Date),authPopup.close())}function onAuthClick(e){gapi.auth2.getAuthInstance().signIn()}function onSignoutClick(e){gapi.auth2.getAuthInstance().signOut(),list.resetDefaultDate(),items.clear(),storage.clear(),authPopup.open(),font.reset()}document.addEventListener("DOMContentLoaded",function(){onClientLoad()});var formElement=document.querySelector(".form"),title=document.querySelector(".form"),saveButton=formElement.querySelector(".form__save"),typeButtons=formElement.elements.type,allDayInput=formElement.querySelector(".form__all-day-input"),dates=formElement.querySelectorAll(".form__date"),times=formElement.querySelectorAll(".form__time"),typeEvent=formElement.querySelector(".form__type-input--event"),typeTask=formElement.querySelector(".form__type-input--task"),currentType="event",formValid=!0,closeButton=document.querySelector(".modal__close");typeButtons.forEach(function(e){e.addEventListener("change",function(){this.checked&&(formElement.classList.remove("form--"+currentType),currentType=this.value,formElement.classList.add("form--"+currentType)),"event"===currentType&&(dates[1].required=!0),"task"===currentType&&(dates[1].required=!1)})}),allDayInput.addEventListener("change",function(){formElement.classList.toggle("form--all-day"),form.allDay=allDayInput.checked,times.forEach(function(e){allDayInput.checked?e.required=!1:e.required=!0})}),editor.element.addEventListener("modalOpened",function(){formElement.elements.summary.focus()});var setDefaultDate=function(){var t=utils.formatDate(new Date);dates.forEach(function(e){e.value=t})},fillForm=function(e){var t=storage.get(e);formElement.elements.summary.value=t.summary,t.start.dateTime&&t.end.dateTime?(console.log(t.start.dateTime),console.log(t.end.dateTime),formElement.elements["start-date"].value=t.start.dateTime.substr(0,10),formElement.elements["end-date"].value=t.end.dateTime.substr(0,10),formElement.elements["start-time"].value=t.start.dateTime.substr(11,5),formElement.elements["end-time"].value=t.end.dateTime.substr(11,5)):(formElement.classList.toggle("form--all-day",!0),allDayInput.checked=!0,form.allDay=!0,formElement.elements["start-date"].value=t.start.date,formElement.elements["end-date"].value=t.end.date),t.start.dateTime&&t.end.dateTime&&t.start.dateTime===t.end.dateTime?(typeEvent.checked=!1,typeTask.checked=!0,formElement.classList.toggle("form--event",!1),formElement.classList.toggle("form--task",!0)):(typeEvent.checked=!0,typeTask.checked=!1,formElement.classList.toggle("form--event",!0),formElement.classList.toggle("form--task",!1)),t.location&&(formElement.elements.location.value=t.location),t.description&&(formElement.elements.description.value=t.description)},onFormSubmit=function(e){e.preventDefault();var t=new FormData(formElement);form.currentId?(update.send(form.currentId,t),form.currentId=null):create.send(t)};formElement.addEventListener("submit",onFormSubmit);var resetForm=function(){formElement.reset(),formElement.className="form form--event"};closeButton.addEventListener("click",function(){resetForm()}),window.form={element:formElement,allDay:!1,fill:fillForm,reset:resetForm,currentId:null};var currentDate=document.querySelector(".current-date"),resetDefaultDate=(setDefaultDate=function(){var e=utils.formatDate(new Date);currentDate.value=e},function(){currentDate.value=null}),getTimeRange={min:function(e){return e.setHours(0,0,0),e},max:function(e){return e.setHours(23,59,59),e}},ListSettings=function(e){this.calendarId="primary",this.timeMin=getTimeRange.min(e).toISOString(),this.timeMax=getTimeRange.max(e).toISOString(),this.singleEvents=!0,this.orderBy="startTime"},listEvents=function(e){gapi.client.calendar.events.list(new ListSettings(e)).then(function(e){var t=e.result.items;items.clear(),storage.clear("fontFamily"),0<t.length?items.render(t):notice.show("События не найдены")})},onListDateChange=function(){var e=new Date(this.value);listEvents(e)};function appendPre(e){var t=document.getElementById("content"),n=document.createTextNode(e+"\n");t.appendChild(n)}currentDate.addEventListener("change",onListDateChange),window.list={setDefaultDate:setDefaultDate,resetDefaultDate:setDefaultDate,update:listEvents},window.alert={show:appendPre};var RemoveSettings=function(e){this.calendarId="primary",this.eventId=e},removeEvent=function(e){return gapi.client.calendar.events.delete(new RemoveSettings(e)).then(function(){notice.show("Успешно удалено")},function(){notice.show("Не удалось удалить")})};window.remove={send:removeEvent};
//# sourceMappingURL=script.min.js.map
